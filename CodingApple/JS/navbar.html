<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./css/navbar.css" />
  </head>
  <body>
    <div class="black-bg">
      <div class="white-bg">
        <h4>로그인하세요</h4>

        <form action="success.html" id="login-form">
          <div class="my-3">
            <input type="text" class="form-control" id="email" />
          </div>
          <div class="my-3">
            <input type="password" class="form-control" id="pw" />
          </div>
          <button type="submit" class="btn btn-primary" id="send">전송</button>
          <button type="button" class="btn btn-danger" id="close">닫기</button>
        </form>
      </div>
    </div>

    <script>
      // 전송버튼을 누를때 첫째 <input>에 입력된게 없으면 alert 띄우기

      // 조건문 쓰는 법
      // 실은 if문안에 true/ false(다른 말로 boolean) 넣어야 잘 작동함
      // 다름을 비교하고 싶으면 !=
      // 엄격한 비교는 ===(타입까지 같아야함) / 느슨한 비교는 ==

      // true로 인식(truthy)하는 자료들(0 제외 숫자/ '문자' / [] / {})
      // false로 인식(falsy)하는 자료들(0 / '' / null / undefined / NaN)

      // 조건 2개 이상을 동시에 비교하고 싶다면 &&(and) 그리고 ||(or) 연산자

      // if (조건){
      //   실행할 코드~~
      // } else {
      //   위 조건이 참이 아닐때 실행핳 코드
      //}

      // 유저가 <input>에 입력한 값임
      // document.getElementById().value;

      // <input>에서 일어나는 input 이벤트(여기 유저가 입력한 값이 변할때 실행됨)
      //document.getElementById("email").addEventListener("change", function () {
      // input/ change 로 써도 가능
      // 다만 다른점으로는 input이벤트는 <input>에 입력한 값이 바뀔때마다 발생하지만 <change>이벤트는 <input>에 입력한 값이 바뀌고 포커스를 잃을 때 발생합니다.
      //  console.log("안녕");
      //});

      document
        .getElementById("login-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          // 이메일과 패스워드 입력란의 값을 가져옴
          let email = document.getElementById("email").value;
          let password = document.getElementById("pw").value;

          // 이메일과 패스워드 둘 다 비어 있는 경우
          if (email === "" && password === "") {
            alert("아이디와 비밀번호를 입력하세요.");
          } else if (email === "") {
            alert("아이디를 입력하세요.");
          } else if (password === "") {
            alert("비밀번호를 입력하세요.");
          } else if (password.length < 6) {
            alert("비밀번호를 6자 이상 입력하세요");
          } else if (/[A-Z].test(password)/) {
            alert("비밀번호에 대문자가 있습니다.");
          } else {
            // 폼을 서버로 제출하거나 다른 작업을 수행할 수 있음
            // 여기에 필요한 로직 추가
            // 이 예제에서는 간단히 알림을 표시
            alert("폼이 제출되었습니다.");
          }

          // 이메일 형식 검사를 해보자(대략: 엄격X => 구글에 이메일 정규식 많음)
          // if(/\S+@\S+.\S+/.test(email => let email의 email : 입력한값)) {
          //  alert('이메일형식아님')
          //}

          // 숙제. 폼전송시 유저가 입력한 비번에 영어대문자가 있는지 검사
        });

      // 태그명으로 찾기
      // $('form').on('submit', function() {

      // })

      // $('#send').on('click', function() {

      // })

      /// else if 문법 ///
      // - 조건식을 연달아 쓰고 싶으면
      // - 몇번이고 사용가능

      // if 두개 써도 else if와 똑같은 듯?
      // 앞의 조건식이 참이면 else문 뒤는 아예 실행이 안됩니다.
      // if문 두개는 앞의 조건식과 상관없이 둘째 if문도 실행됨
    </script>

    <!-- one-way UI 애니메이션 만드는법 -->
    <!-- 투명도가 0 -> 1 (A상태 -> B상태) -->
    <!-- 
      1. 시작스타일 
      2. 최종스타일
      (class로 만들어놓으셈)
      3. 원할 때 최종스타일로 변하라고 코드짬(자바스크립트로) 
      4. transition 추가
    -->

    <nav class="navbar navbar-light bg-light">
      <div class="container-fluid">
        <span class="navbar-brand">Navbar</span>
        <button class="navbar-toggler" type="button">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="scroll-progress">
          <div class="progress-bar"></div>
        </div>
      </div>
    </nav>

    <ul class="list-group">
      <li class="list-group-item">An item</li>
      <li class="list-group-item">A second item</li>
      <li class="list-group-item">A third item</li>
      <li class="list-group-item">A fourth item</li>
      <li class="list-group-item">And a fifth one</li>
    </ul>

    <div clas="main-bg">
      <h4>Shirts on Sale</h4>
      <button id="login" class="btn btn-danger">로그인</button>
    </div>

    <button class="btn-login">로그인</button>

    <p class="hello">안녕</p>
    <p class="hello">안녕</p>
    <p class="hello">안녕</p>
    <button id="test-btn">버튼</button>

    <!-- overflow-y: scroll(내용물 넘치면 스크롤바 생성해줌) -->
    <div class="lorem" style="width: 200px; height: 100px; overflow-y: scroll">
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam nemo ex
      cumque quaerat expedita aperiam eaque laudantium voluptate distinctio
      libero, nam, repudiandae maxime facere alias modi quia, at ad unde.
    </div>

    <div style="height: 1000px"></div>

    <script>
      /// 셀렉터들 ///
      // getElementById(), getElementsByClassName(), querySelector(), querySelectorAll();
      // querySelector(): 편리하지만 맨 위에 나오는 한개만 찾아줌
      // 다 찾아주는 querySelectorAll(): 원하는 번째 수를 고를려면 인덱싱하면 된다.

      document
        .querySelector(".navbar-toggler")
        .addEventListener("click", function () {
          document.querySelectorAll(".list-group")[0].classList.toggle("show");
        });

      // Q. 버튼 한번 더 누르면 숨기기?
      // - 버튼 짝수번 누르면 show 제거해주셈
      // - 버튼 누를때 show가 이미 있으면 제거해주셈
      // - classList.toggle('클래스명');
      // toggle(show가 있으면 제거, 없으면 추가하라는 뜻)
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>

    <!-- 
      /// jQuery ///
      jQuery는 라이브러리일뿐 -> 함수명만 짧아짐
      https://releases.jquery.com/
      (주의) $('셀렉터')로 찾으면 jQuery함수만 붙일수 있음
      (주의) querySelector('셀렉터')로 찾으면 자바스크립트 함수(메소드:.innerHTML과 같은)만 붙일 수 있음
      
      jQuery cdn 검색해서 3.x버전 <script> 태그 복붙(설치한 곳 하단에서 jQuery 문법 사용 가능) : 거의 모든 자바스크립트 라이브러리는 <body> 끝나기전에 넣는거 권장 -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>

    <script>
      // <p> 내부 글자를 '바보'로 변경하려면?
      // document.querySelector(".hello").innerHTML = "바보";
      $(".hello").html("바보");

      // <p> 내부 글자 스타일 변경은?
      // document.querySelector(".hello").style.fontSize = "20px";
      $(".hello").css("color", "red");

      // class 탈부착하는 코드도 짧아짐
      // 제거는 .removeClass()
      // 토글은 .toggleClass()
      $(".hello").addClass("hi");

      // <p> 3개를 전부 '바보'로 바꾸려면?
      // document.querySelectorAll(".hello")[0].innerHTML = "바보";
      // document.querySelectorAll(".hello")[1].innerHTML = "바보";
      // document.querySelectorAll(".hello")[2].innerHTML = "바보";
      $(".hello").html("바보");
      //라고만 해도 다 한번에 바뀜(querySelectorAll과 같음)

      // 이벤트리스너도 짧아짐
      // document.querySelector('#test-btn').addEventListener('click', function() {})
      $("#test-btn").on("click", function () {
        $(".hello").slideUp();
        // 간단한 UI용 애니메이션 편리 제공
        // hide() / fadeOut() / slideUp()
      });

      // 숙제1. 로그인 버튼을 누르면 모달창이 떠야하고 닫기 버튼을 누르면 모달창이 닫혀야함

      // $(".btn-login").on("click", function () {
      //   $(".black-bg").show();
      // });
      $(".btn-danger").on("click", function () {
        $(".black-bg").addClass("show-modal");
      });

      $("#close").on("click", function () {
        $(".black-bg").hide();
      });
    </script>

    <script>
      /// 정규식으로 이메일형식 검증해보기 ///

      // 문자 검사하는 쉬운 방법(console창)
      // 'abc'.includes('a')  // 있으면 그자리에 true, 없으면 그자리에 false 남겨줌 (but, 숫자가 1회 출현하냐 A로 끝나냐 한글이 들어있냐 영어가 들어있냐 이런건 못함)

      // 있는지 검사할 문자   검사당할 문자 ('a'라는 문자가 'abcde'에 들어있는지: true/false 알려줌)
      //            /a/.test('abcde')

      // 정규식 장점                  a-z중 아무글자 1개가 '여기' 들어있냐/ 아무알파벳1개
      // 1. 정규식으로 문자범위 지정 가능(예: /[a-z]/.test('abcde') / /[a-zA-Z]/.test('abcde')) / /\S/ => 아무 문자 1개라는 뜻(특수기호까지 포함)

      // 2. 정규식으로 시작/끝 문자 검사하기
      // /^a/.test('sdfdfsa') => a로 시작하냐
      // /a$/.test('sdfdfsa') => a로 끝나냐

      // 3. or 기호는 |
      // /a|b/.test('aaaaa')    /(a|b)/.test('aaaaa') => ()안 부터 연산해줌

      // 정규식으로 이메일형식 검사는? (''.'은 특별한 정규식 문법임 그래서 앞에 '\'있어야함)
      // /\S@\S\.\S/.test('aaa@bbb.ccc') => false(\S가 한문자만 뜻해서)
      // /\S+@\S+\.\S+/.test('aaa@bbb.ccc') => true('+'는 왼쪽 문자 반복검색)
    </script>

    <script>
      /// scroll 이벤트 리스너 ///

      // 강제로 원하는 위치로 스크롤하기(window.scrollTo(x, y)) => 원래는 반짝하면서 순간이동하는데 Bootstrap설치시 스크롤을 스무스하게 처리해주기도 함 => 스무스하게 동작하는거 막으려면 :root이용한 css 확인해보기(scroll-behavior: auto)
      // 현재 위치로부터 강제로 스크롤하기(window.scrollBy(x, y)) => 버튼누르면 몇px 밑으로 움직이게 해주세요 이런거 가능

      // 얘가 스크롤 될때마다
      window.addEventListener("scroll", function () {
        // 여기코드 실행해줌
        console.log(window.scrollY); // 유저가 얼마나 스크롤바를 내렸나(window.scrollY(= window.pageYOffset) / window.scrollX(가로로))
      });

      // jQuery 버전
      // $(window).on("scroll", function () {
      //   // 현재 스크롤바 위치 출력
      //   $(window).scrollTop();

      //   // 현재 스크롤바 이동(괄호안만 채우면 쉽게 이동시킬 수 있다)
      //   $(window).scrollTop(100);
      // });

      // 숙제 1. 스크롤바 100px 이상 내리면 로고 폰트사이즈 줄이기
      window.addEventListener("scroll", function () {
        if (window.scrollY >= 100) {
          document.querySelector(".navbar-brand").style.fontSize = "20px";
        }
      });

      // 응용. 다시 스크롤바가 원위치로 돌아오면 폰트사이즈 커지기
      window.addEventListener("scroll", function () {
        if (window.scrollY < 100) {
          document.querySelector(".navbar-brand").style.fontSize = "30px";
        }
      });

      // 숙제2. 박스(회원약관)의 스크롤바 끝까지 내리면 alert()('다읽었군여') 띄우기(힌트. div의 스크롤바 내린 양 + 눈에보이는 div 박스의 원래 높이 === div의 실제높이)
      document.querySelector(".lorem").addEventListener("scroll", function () {
        // <div> 스크롤바 내린 높이는 => 셀렉터.scrollTop
        // <div> 박스의 실제 높이 구하는 => 셀렉터.scrollHeight
        // but, 스크롤을 다 내려도 스크롤양과 실제높이는 같아질 수 없다
        // 눈에 보이는 <div>박스의 높이 구하는 => 셀렉터.clientHeight
        // 약간의 오차가 생김(소수점)
        var 스크롤양 = document.querySelector(".lorem").scrollTop;
        var 실제높이 = document.querySelector(".lorem").scrollHeight;
        var 높이 = document.querySelector(".lorem").clientHeight;
        console.log(스크롤양, 실제높이, 높이);

        if (스크롤양 + 높이 > 실제높이 - 10) {
          alert("다 읽었습니다");
        }
      });

      // scroll 다룰 때 주의 점
      // 1. scroll 이벤트리스너 안의 코드는 1초에 60번이상 실행됨 -> 부담이 될 수 있으니 적게 사용해야함
      // 2. 바닥 체크도 여러번 중복으로 해줄 듯(1초에 60번 실행되기때문) -> 예를 들어 alert창이 연속으로 뜰 수도 있음 -> 방지하는 방법 찾아보기!!!

      // Q. 현재 페이지 끝까지 스크롤 체크는?
      // <html> 찾아줌
      document.querySelector("html").scrollHeight; // 현재 페이지 실제높이 => 페이지 로드완료시 실행해야 정확 => <body> 끝나기 전에 넣는게 굿
      document.querySelector("html").clientHeight; // 페이지 보는 부분 높이
      document.querySelector("html").scrollTop; // 현재 페이지 스크롤 양 (= window.scrollY 로 쓰면 됨)

      document.querySelector("html") === document.documentElement; // 똑같은 말임

      // 오늘의 교훈
      // 1. 스크롤바 조작할 때마다 코드 실행이 가능하구나
      // 2. 현재 보이는 <div> 박스의 실제높이/ 보이는 높이 구할수 있구나
      // 3. 스크롤양도 구할 수 있군

      // 심심하면 숙제. 스크롤 하면 진척 상황도를 맨위에 보여주는 거 만들어보기(늘었다 줄었다)
      window.addEventListener("scroll", () => {
        const scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop;
        const scrollHeight =
          document.documentElement.scrollHeight || document.body.scrollHeight;
        const scrollPercentage =
          (scrollTop / (scrollHeight - window.innerHeight)) * 100;

        console.log(scrollTop, scrollHeight, scrollPercentage);

        document.querySelector(".progress-bar").style.width =
          scrollPercentage + "%";
      });
    </script>
  </body>
</html>
